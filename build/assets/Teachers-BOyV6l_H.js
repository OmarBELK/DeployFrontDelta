import{R as k,r as n,u as C,j as e,L as T,D as S,M as D,C as E,a as M,B as A,H as q,E as K,T as O,c as _}from"./index-DoJY8-2y.js";function L(){const[h,m]=k.useState(!1),[x,i]=n.useState(!1),[c,d]=n.useState([]),b=C();n.useState(!1);const[o,u]=n.useState(null),g=[{header:"Prénom",accessorKey:"prenom"},{header:"Nom",accessorKey:"nom"},{header:"Spécialité",accessorKey:"specialite",cell:({row:s})=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:s.original.specialite})},{header:"Date de naissance",accessorKey:"date_naissance",cell:({row:s})=>new Date(s.original.date_naissance).toLocaleDateString()},{header:"Téléphone",accessorKey:"telephone"},{header:"Genre",accessorKey:"sexe",cell:({row:s})=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${s.original.sexe==="M"?"bg-blue-100 text-blue-800":"bg-pink-100 text-pink-800"}`,children:s.original.sexe==="M"?"Masculin":"Féminin"})},{header:"Actions",id:"actions",cell:({row:s})=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{var l,a;return(a=(l=s.original).onView)==null?void 0:a.call(l,s.original)},className:"p-1 text-blue-600 hover:text-blue-800",children:e.jsx(K,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u(s.original.id),className:"p-1 text-gray-600 hover:text-gray-800",children:e.jsx(O,{className:"w-4 h-4"})})]})}];n.useEffect(()=>{fetch("http://162.19.205.65:81/professeur_list/").then(s=>{if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return s.json()}).then(s=>{d(s),m(!1)}).catch(s=>{m(!1)})},[o]);const p=s=>{},f=s=>{b(`/teachers/${s.id}`)},j=s=>{},y=c.map(s=>({...s,onView:f,onEdit:j}));if(h)return e.jsx(T,{});function v({onSubmit:s,onClose:l}){const[a,r]=n.useState({nom:"",prenom:"",telephone:"",adresse:"",date_naissance:"",sexe:"M",nationalite:"",specialite:""}),N=async t=>{t.preventDefault();const w=await _(a);d([...c,w]),s(a),l()};return e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prénom"}),e.jsx("input",{type:"text",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:a.prenom,onChange:t=>r({...a,prenom:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nom"}),e.jsx("input",{type:"text",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:a.nom,onChange:t=>r({...a,nom:t.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Spécialité"}),e.jsx("input",{type:"text",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:a.specialite,onChange:t=>r({...a,specialite:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date de naissance"}),e.jsx("input",{type:"date",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:a.date_naissance,onChange:t=>r({...a,date_naissance:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Téléphone"}),e.jsx("input",{type:"tel",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:a.telephone,onChange:t=>r({...a,telephone:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Adresse"}),e.jsx("input",{type:"text",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:a.adresse,onChange:t=>r({...a,adresse:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Genre"}),e.jsxs("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:a.sexe,onChange:t=>r({...a,sexe:t.target.value}),children:[e.jsx("option",{value:"M",children:"Masculin"}),e.jsx("option",{value:"F",children:"Féminin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nationalité"}),e.jsx("input",{type:"text",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:a.nationalite,onChange:t=>r({...a,nationalite:t.target.value})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Annuler"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Ajouter un enseignant"})]})]})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Enseignants"}),e.jsx("button",{onClick:()=>i(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Ajouter un enseignant"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsx(S,{columns:g,data:y,searchPlaceholder:"Rechercher un enseignant..."})}),e.jsx(D,{isOpen:x,onClose:()=>i(!1),title:"Ajouter un enseignant",children:e.jsx(v,{onSubmit:p,onClose:()=>i(!1)})}),e.jsx(E,{isOpen:o!==null,onConfirm:async()=>{try{await M.delete(`http://162.19.205.65:81/professeurs/delete/${o}/`,{headers:{"Content-Type":"application/json"}}),d(c.filter(s=>s.id!==o)),u(null),A.error("Supprimé avec succès",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:q})}catch(s){console.error("Error deleting teacher:",s)}},onCancel:()=>u(null),message:"Voulez-vous vraiment supprimer cet enseignant ?"})]})}export{L as default};
